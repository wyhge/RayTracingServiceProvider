光线追踪（Ray Tracing）是一种基于物理光学原理的计算机图形学渲染技术，通过模拟光线在虚拟场景中的传播路径（反射、折射、阴影等）生成高度逼真的图像。以下从原理和实际演示（Demo）两方面展开说明：

​​一、光线追踪原理详解​​
​​1. 核心思想：光路可逆​​
光线追踪从​​摄像机（人眼）反向发射光线​​，追踪每条光线在场景中的路径，而非从光源正向追踪（避免计算无效光线）。这种逆向模拟大幅提升了效率。

​​2. 工作流程​​
典型流程基于​​Whitted风格递归算法​​（1980年提出）：

​​光线生成（Ray Generation）​​：从摄像机向每个像素发射一条主光线（Primary Ray）。
​​求交测试（Intersection Test）​​：计算光线与场景物体的交点（如球体、三角面片），记录最近交点。
​​光照计算（Shading）​​：在交点处计算直接光照：
​​漫反射​​：光线均匀散射（Lambertian模型）。
​​镜面反射​​：遵循反射定律（如金属材质）。
​​折射​​：透明物体中的光线偏折（斯涅尔定律）。
​​递归追踪​​：若物体具有反射/折射属性，发射次级光线（Secondary Ray）并重复上述过程（递归深度通常限制为4–5层）。
​​阴影计算​​：从交点向光源发射阴影光线（Shadow Ray），若被遮挡则标记为阴影。
​​3. 分类与演进​​
​​类型​​	​​特点​​	​​应用场景​​
​​经典光线追踪​​	仅处理直接光照和简单反射，无递归	早期科学可视化
​​递归式光线追踪​​	支持反射/折射递归，实现镜面、玻璃效果	电影特效、游戏
​​路径追踪​​	基于蒙特卡洛方法，随机采样光线路径，支持全局光照（间接照明）	离线渲染（如电影）
​​分布式光线追踪​​	对单像素发射多条光线，抗锯齿、软阴影	高质量静态图像
​​4. 关键优化技术​​
​​空间加速结构​​：BVH（层次包围盒）或KD-Tree加速求交测试，减少计算量。
​​重要性采样​​：优先计算对像素贡献大的光线路径（如接近镜面反射方向）。
​​蒙特卡洛积分​​：通过随机采样逼近复杂光照积分（如环境光遮蔽）。